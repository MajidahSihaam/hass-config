replay:
  input_boolean:
    replay_mode:
      name: Replay Mode
      initial: off
      icon: mdi:loop
            
  sensor:
  - platform: history_stats
    name: 'Replay Entrance Hall Motion'
    entity_id: binary_sensor.entrance_hall_motion
    state: 'on'
    type: count
    start: >
      {{ 
        as_timestamp(
          now().replace(hour=0).replace(minute=0).replace(second=0) 
        ) - now().weekday() * 86400
      }}
    end: >
      {{ 
        as_timestamp(
          now().replace(hour=0).replace(minute=0).replace(second=0) 
        ) - (now().weekday() * 86400) + 30
      }}
  - platform: history_stats
    name: 'Replay Living Room Motion'
    entity_id: binary_sensor.living_room_motion
    state: 'on'
    type: count
    start: >
      {{ 
        as_timestamp(
          now().replace(hour=0).replace(minute=0).replace(second=0) 
        ) - now().weekday() * 86400
      }}
    end: >
      {{ 
        as_timestamp(
          now().replace(hour=0).replace(minute=0).replace(second=0) 
        ) - (now().weekday() * 86400) + 30
      }}
  - platform: history_stats
    name: 'Replay Top Floor Motion'
    entity_id: binary_sensor.top_floor_motion
    state: 'on'
    type: count
    start: >
      {{ 
        as_timestamp(
          now().replace(hour=0).replace(minute=0).replace(second=0) 
        ) - now().weekday() * 86400
      }}
    end: >
      {{ 
        as_timestamp(
          now().replace(hour=0).replace(minute=0).replace(second=0) 
        ) - (now().weekday() * 86400) + 30
      }}