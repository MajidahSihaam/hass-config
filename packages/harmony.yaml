harmony:
  input_select:
    living_room_tv:
      name: Living Room TV
      icon: mdi:television
      options:
        - Watch TV
        - Watch Apple TV
        - Watch Shield TV
        - Watch Smart TV
        - Listen to Music
      initial: Watch TV
  automation:
  - alias: Harmony Change Activity
    trigger:
    - platform: state
      entity_id: input_select.living_room_tv
    action:
    - service: remote.turn_on
      data_template:
        entity_id: remote.living_room_tv
        activity: '{{ states.input_select.living_room_tv.state }}'

  - alias: Harmony Update Activity Select
    trigger:
    - platform: state
      entity_id: sensor.living_room_tv
    condition:
      condition: template
      value_template: '{{ states.sensor.living_room_tv.state != "PowerOff" and states.sensor.living_room_tv.state != "None" }}'
    action:
    - service: input_select.select_option
      data_template:
        entity_id: input_select.living_room_tv
        option: '{{ states.sensor.living_room_tv.state }}'

  - alias: Harmony Auto Off
    trigger:
    - entity_id: binary_sensor.living_room_motion
      platform: state
      from: 'on'
      to: 'off'
      for:
        hours: 0
        minutes: 30
        seconds: 0
    action:
    - service: remote.turn_off
      entity_id: remote.living_room_tv

  - alias: Harmony Auto Shield TV
    trigger:
    - entity_id: media_player.living_room_shield_tv
      platform: state
      to: 'playing'
    action:
    - service: remote.turn_on
      data:
        entity_id: remote.living_room_tv
        activity: 'Watch Shield TV'
