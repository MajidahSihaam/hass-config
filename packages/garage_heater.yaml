garage_heating:
  input_datetime:
    garage_heating_timer:
      name: Heating On At
      has_time: true
      has_date: true
      icon: mdi:timelapse

  input_boolean:
    garage_heating_timer:
      name: Heating On At
      initial: off
      icon: mdi:timelapse

  automation:
    - alias: Garage Heater Timer On
      trigger:
      - platform: state
        entity_id: input_datetime.garage_heating_timer
      action:
      - service: input_boolean.turn_on
        entity_id: input_boolean.garage_heating_timer

    - alias: Garage Heater Timer Trigger
      trigger:
      - platform: template
        value_template: |
          {{ as_timestamp(states.input_datetime.garage_heating_timer.state) <
             as_timestamp(now()) 
          }}
      condition:
        condition: state
        entity_id: input_boolean.garage_heating_timer
        state: 'on'
      action:
      - service: input_boolean.turn_off
        entity_id: input_boolean.garage_heating_timer
      - service: climate.set_operation_mode
        entity_id: climate.house
        data:
          operation_mode: 'heat'
      - service: notify.ios_dphone
        data:
          message: 'Turning on the garage heater via timer!'